** Qt porting and FM-7/77/AV/AV40/EX for Common Source Code Project **

                                                          Apr 09, 2016
                            K.Ohta  (whatisthis.sowhat _at_ gmail.com)

1.About

This package is Qt5 porting of Common Source Code Project (CSP)
and built with Qt5, for Windows, built with MinGW(32bit).

Source Code:
   https://github.com/Artanejp/common_source_project-fm7/releases/tag/SNAPSHOT_20160409
   
Additional INFO:
GNU/Linux with AMD64 binaries and Win32 with MINGW binaries are avaiable, packed with 7zip'ed format:

  http://www1.axfc.net/u/3648857
    or
  https://www.sendspace.com/file/946u12

  SIZE: 78433296
  MD5SUM: dc6bf7cc469efd242dfb7665519af67e
  SHA256SUM: 04039c75e76895cc979f7184bb3ac13505d82f67ddee4684a555f510c71b3a8f

2.Background
Common Source Code Project (CSP) is good emulator writing.
It also distributed with GPLv2, this is good for me.
But codes are specified to M$ Visual C.
I'm using GNU/Linux, and I starting to apply FM-7(or later).
So, I start to port to GNU/Linux and using Qt4/Qt5.

What you need at least:
a. Qt5 (neither Qt3 and Qt4) toolkit.
b. Some OpenGL implementation, maybe at leaset OpenGL v2.x .
c. gcc / g++ (4.7 or later? ) or llvm clang / clang++ (3.5 or later?) toolchain.
d. SDL2 (not SDL1.x).
e. CMake 2.8 or later.

   * TIPS: If emufoo.exe don't show screen drawing, set environment 
           variable QT_OPENGL to software (i.e. Using Windows as VirtualBox's gueat OS).


3.How to build:
After extracting (or git pulled) sourcecodes:
$ cd {srctop}/source/build-cmake/{Machine name}/
$ mkdir build
$ cd build

To configure:
$ cmake ..
or
$ ccmake ..

To build:
$ make

To install:
$ sudo make install

4.Qt specified notice:
・Place R@Ms under $HOME/emu{Machine Name}/ , this directory has made
after first using.
・Config file, {foo}.ini is writteon on $HOME/.config/emu{Machine Name}/ .

5.Status
a. I tested to build only under Debian GNU/Linux "sid".
   But, perhaps, will succed to build another GNU/Linux OSs or BSD OS variants.
   * On windows, using MinGW is already okay, but not tested drawing.
   * Cross building with GNU/Linux's MinGW32 and Qt5.5.1 (for MinGW) is available. 
     Modify and use build-cmake/config_build_cross_win32.sh and related *.cmake files.
   * And, you can also build with M$ Visual Studio 2013 or 2015.

b. Now, I using Qt5 as toolkit, because authors of Qt announced
   "Qt4 is obsolete, will be updated no longer".

c. All of virtual machines are already ported to Qt (On Oct 29, 2015):
d. Now using GCC-5.2 with Link Time Optimize to build for distrubuted binaries.

Upstream repositry:
https://github.com/Artanejp/common_source_project-fm7

Upstream (Takeda Toshiya San's original code)
http://homepage3.nifty.com/takeda-toshiya/

Changes:

* SNAPSHOT Apr 09, 2016
  * Merge upstream 2016-04-01 .
  * [General] Add upstream newbie VMs: YALKY, PC-2001 and SMC-70.
  * [*nix] Separate UI component to shared lib named libCSPgui (and re-factor src/qt/gui and src/qt/common .
  * [BUILD/GCC] Compile with -O3 for libCSPgui .
  * [*nix] Add a installer script.
  * Note: [VM][FM7][WIP] Fix still not working some software without re-construct VMs at FM-7/NEW7/77.
  * Built with commit 3297e37e10c8b57a1bd0378b55ccd6eccd6d82b9.

-- Apr 09, 2016 00:16:14 +0900 K.Ohta <whatisthis.sowhat@gmail.com>

Upstream changes:
-----
4/1/2016

[VM/DATAREC] suppot to specify channel of data and voice for each vm
[VM/UPD7810] support uPD7810 series based on MAME 0.152
[VM/UPD16434] support uPD16434 based on PockEmul

[PC2001] support NEC PC-2001 (not work)
[SMC70] support SONY SMC-70
[YALKY] support Yuasa Kyouiku System YALKY (not work)


3/23/2016

[VM/FMGEN] fix psg volume (thanks Mr.umaiboux and Mr.Artane.)
[VM/MZ1P17] support MZ-80P3 and MZ-80P4 (thanks Mr.Suga)
[VM/UPD7801] support HOLD/HLDA signals at PC #7/#6 pins

[FM77AV] import Mr.Artane.'s fixes (Commits on Mar 20, 2016)
[MZ80K] support dummy printer device and MZ-80P3 / MZ-80P4 (thanks Mr.Suga)
[MZ80K/KEYBOARD] fix shift and kana keys
[MZ2800] fix issue that prnfile instance is not initialized

-----


Have fun!
-- Ohta.

