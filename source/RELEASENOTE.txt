** Qt porting and FM-7/77/AV/AV40/EX for Common Source Code Project **

                                                         May 18, 2017
                            K.Ohta  (whatisthis.sowhat _at_ gmail.com)

1.About

This package is Qt5 porting of Common Source Code Project (CSP)
and built with Qt5, for Windows, built with MinGW(32bit).

Source Code:

   https://github.com/Artanejp/common_source_project-fm7/releases/tag/SNAPSHOT_20170518
   
Additional INFO:

   Binaries will be available, distibute from osdn.net.
   
   See, https://osdn.net/projects/csp-qt/  and
        https://osdn.net/projects/csp-qt/releases/ .
	
   Released at:


2.Background

Common Source Code Project (CSP) is good emulator writing.
It also distributed with GPLv2, this is good for me.

But codes are specified to M$ Visual C.
I'm using GNU/Linux, and I starting to apply FM-7(or later).

So, I start to port to GNU/Linux and using Qt4/Qt5.

What you need at least:

a. Qt5 (neither Qt3 and Qt4) toolkit: Qt5.3 or later.

b. Some OpenGL implementation, maybe at leaset OpenGL v2.x .

c. gcc / g++ (5.0 or later? ) or llvm clang / clang++ (3.5 or later?) toolchain.

d. SDL2 (not SDL1.x).

e. CMake 2.8 or later.

* TIPS: If emufoo.exe don't show screen drawing, set environment variable QT_OPENGL to software (i.e. Using Windows as VirtualBox's gueat OS).


3.How to build:

After extracting (or git pulled) sourcecodes:

$ cd {srctop}/source/build-cmake/{Machine name}/

$ mkdir build

$ cd build

To configure:

$ cmake ..

or

$ ccmake ..

To build:

$ make

To install:

$ sudo make install

4.Qt specified notice:

*Place R@Ms under $HOME/emu{Machine Name}/ , this directory has made
after first using.

*Config file, {foo}.ini is writteon on $HOME/.config/emu{Machine Name}/ .

5.Status

a. I tested to build only under Debian GNU/Linux "sid",Ubuntu Linux 16.04LTS "Xenial" for AMD64 (x86_64)
and MinGW with GCC6 (Windows 32bit).

   But, perhaps, will succed to build another GNU/Linux OSs or BSD OS variants.
   
   * On windows, using MinGW is already okay, but not tested drawing.
   
   * Cross building with GNU/Linux's MinGW32 and Qt5.5.1 (for MinGW) is available. 
     Modify and use build-cmake/config_build_cross_win32.sh and related *.cmake files.
     
   * And, you can also build with M$ Visual Studio 2013 or 2015.

b. Now, I using Qt5 as toolkit, because authors of Qt announced "Qt4 is obsolete, will be updated no longer".

c. All of virtual machines are already ported to Qt (On Oct 29, 2015).

d. Now using GCC-6.1 with Link Time Optimize to build for distrubuted binaries.

e. Implemented socket, networking for MZ-2500, but, not tested yet (；´Д｀)

Upstream repositry:
https://github.com/Artanejp/common_source_project-fm7

Project Page:

https://osdn.jp/projects/csp-qt/

Upstream (Takeda Toshiya San's original code):

http://takeda-toshiya.my.coocan.jp/

Changes:
* SNAPSHOT May 18, 2017
  * Upstream 2017-05-15
  * [UI/Qt] Fix unconnected event.
  * [UI/Qt] I forgot to add a "*.gz" extension to opening of Cartridges, CDs and Binaries.
  * [OSD/Qt] Add *_features_* functions. It needs for *NEW* device emulation.Pls. port to win32/ .
  * [EMU][Qt][MOUSE] Fix not effect with button-up.
  * [VM] LibCSPcommon_vm : Without #ifdef.
  * [VM] LibCSPcommon_vm : Add some devices.See src/vm/common_vm/CmakeLists.txt .
  * [VM] Fix FTBFSs with LLVM (4.0).
  * [VM/MC6809] Build shared library without libnewdev/. Use vm/mc6809.cpp and vm/mc6809_debugup.cpp . See, fm7.cpp.
  * [VM/FM7] Faster address transferring.
  * [VM/DEVICE] You should add "DECVICE::initialize()" to top of initialize().
  * [VM/DEVICE] Move some devices to shared lib.
  * [VM/DEVICE] Split MSM5832:: from MSM58321:: .
  * [VM/M6502] Split M6502 to N2A03 and M6502.
  * [VM/MB61VH010] Expect to be faster rendering.
  * [VM/MB61VH010][FM77AV] Re-order addrsss of read_data8() and write_data8(). You must re-build some VMs (FM77AV series etc.)
  * [CONFIG] Fix over loop.
  * Build with 5d424b2ecac58fe55570c2e9fc0db0edd0d94471 or later.

-- May 17, 2017 22:44:25 +0900 K.Ohta <whatisthis.sowhat@gmail.com>

Upstream changes:
-----
5/15/2017

[X1TURBOZ] support SHARP X1turboZ
[X1TURBOZ/DISPLAY] support X1turboZ enhanced graphic modes
[X1TURBOZ/IOSUB] support analog palette access wait


5/13/2017

[WIN32/SCREEN] fix not to move window position unnecessarily

[VM/AM9511] support AM9511 (thanks Xep128)
[VM/DISK] support to specify raw track size
[VM/MB8877] support to specify raw track size
[VM/MC6844] support MC6844
[VM/MC6850] support MC6850
[VM/MSM58321] add read_signal()
[VM/MEMORY] improve that dma controller does not read/write memory mapped i/o
[VM/NOISE] fix not to restart from first sample if already playing noise

[YIS] support YAMAHA YIS


4/16/2017

[VM/IO] revert the fix in 4/15/2017
[VM/SN76489AN] revert the fix in 4/15/2017


4/15/2017

[COMMON] add muldiv_s32 and muldiv_u32 to multiple 32bit integer
[COMMON] fix functions to support symbols

[VM/IO] improve to use read/write_io8/16/32w() to get wait clock from device
[VM/SN76489AN] improve to return 32 + 16 * n for wait clock

[MZ700] improve correct cpu clock and frame rate
[MZ800] improve correct cpu clock and frame rate

-----


Have fun!
-- Ohta.

