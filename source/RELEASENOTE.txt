** Qt porting and FM-7/77/AV/AV40/EX for Common Source Code Project **

                                                          Mar 25, 2016
                            K.Ohta  (whatisthis.sowhat _at_ gmail.com)

1.About

This package is Qt5 porting of Common Source Code Project (CSP)
and built with Qt5, for Windows, built with MinGW(32bit).

Additional INFO:
GNU/Linux with AMD64 binaries and Win32 with MINGW binaries are avaiable, packed with 7zip'ed format:


  or


 MD5SUM: 
 SHA256SUM: 
 Source Code:
    https://github.com/Artanejp/common_source_project-fm7/releases/tag/SNAPSHOT_20160325


2.Background
Common Source Code Project (CSP) is good emulator writing.
It also distributed with GPLv2, this is good for me.
But codes are specified to M$ Visual C.
I'm using GNU/Linux, and I starting to apply FM-7(or later).
So, I start to port to GNU/Linux and using Qt4/Qt5.

What you need at least:
a. Qt5 (neither Qt3 and Qt4) toolkit.
b. Some OpenGL implementation, maybe at leaset OpenGL v2.x .
c. gcc / g++ (4.7 or later? ) or llvm clang / clang++ (3.5 or later?) toolchain.
d. SDL2 (not SDL1.x).
e. CMake 2.8 or later.

   * TIPS: If emufoo.exe don't show screen drawing, set environment 
           variable QT_OPENGL to software (i.e. Using Windows as VirtualBox's gueat OS).


3.How to build:
After extracting (or git pulled) sourcecodes:
$ cd {srctop}/source/build-cmake/{Machine name}/
$ mkdir build
$ cd build

To configure:
$ cmake ..
or
$ ccmake ..

To build:
$ make

To install:
$ sudo make install

4.Qt specified notice:
・Place R@Ms under $HOME/emu{Machine Name}/ , this directory has made
after first using.
・Config file, {foo}.ini is writteon on $HOME/.config/emu{Machine Name}/ .

5.Status
a. I tested to build only under Debian GNU/Linux "sid".
   But, perhaps, will succed to build another GNU/Linux OSs or BSD OS variants.
   * On windows, using MinGW is already okay, but not tested drawing.
   * Cross building with GNU/Linux's MinGW32 and Qt5.5.1 (for MinGW) is available. 
     Modify and use build-cmake/config_build_cross_win32.sh and related *.cmake files.
   * And, you can also build with M$ Visual Studio 2013 or 2015.

b. Now, I using Qt5 as toolkit, because authors of Qt announced
   "Qt4 is obsolete, will be updated no longer".

c. All of virtual machines are already ported to Qt (On Oct 29, 2015):
d. Now using GCC-5.2 with Link Time Optimize to build for distrubuted binaries.

Upstream repositry:
https://github.com/Artanejp/common_source_project-fm7

Upstream (Takeda Toshiya San's original code)
http://homepage3.nifty.com/takeda-toshiya/

Changes:

* SNAPSHOT Mar 24, 2016
  * Merge upstream 2016-03-17 .
  * [FM7] Fix some weird works (i.e: not booting DEATH-Force) without construct VM twice, now construct VM a time.
  * [UI/PCENGINE] Add support CD-ROM^2 (but not tested yet, I don't have any image).
  * [VM/MB8877] Probe some status via read_signal().
  * [BUILD/GCC] Use -Og instead of -O3.
  * [UI/MZ3500/HC80/QC10] Fix not set dip-switches.
  * [UI/JOYSTICK] Support Label of buttons.
  * [UI] Add supporting printers with more VMs.
  * [UI/MZ80] Enable select PCG-800/1200.
  * [UI/MZ700] Enable select PCG-700.
  * [VM/FMGEN] PSG: Fix volumes are not independed via another PSG/SSG devices. Thanks to umaiboux.
               See: http://hanabi.2ch.net/test/read.cgi/i4004/1430836648/576
  * [VM/FM-8] Add support Bubble Casette, this is not complete implement , but seems to work.
  * Built with commit 34fb5d731eccd3601a7587657ccb1eb22404045b.

-- Mar 25, 2016 13:26:17 +0900 K.Ohta <whatisthis.sowhat@gmail.com>


Upstream changes:
-----
3/17/2016

[ALL] improve VC++2013 project files for include/lib directories and manifest

[COMMON] import Mr.Artane.'s fixes (Commits on Mar 11, 2016)
[EMU] import Mr.Artane.'s fixes (Commits on Mar 11, 2016)
[EMU] add get_sound_rate()

[VM/SCSI_CDROM] improve CD-DA mixer to reduce cpu usage

[PCENGINE/PCE] fix adpcm streaming with dma function for Ys III


3/16/2016

[VM/HUC6280] support busreq
[VM/MSM5205] support MSM5205 based on MAME 0.171
[VM/SCSI_CDROM] support SCSI CD-ROM drive
[VM/SCSI_CDROM] support NEC features based on MAME 0.171 and Ootake 2.76
[VM/SCSI_DEV] support more correct req timing
[VM/SCSI_DEV] simplify codes
[VM/SCSI_HDD] fix save/load state function to call SCSI_DEV's ones
[VM/SCSI_HDD] simplify codes
[VM/SCSI_HOST] suuport output bsy signal to notify bus free

[PCENGINE] support CD-ROM^2 based on MAME 0.171 and Ootake 2.76
[PCENGINE] change icon file

3/5/2016

[EMU] add force_out_debug_log() function

[VM/DEVICE] add definitions for SCSI signals
[VM/I8237] suuport output signal to notify terminal count
[VM/MB8877] support MB89311
[VM/SCSI_HOST] support SCSI base host adaptor
[VM/SCSI_DEV] support SCSI base device
[VM/SCSI_HDD] support SCSI hard disk drive
[VM/UPD71071] fix to clear registers at initialize() for debug mode
[VM/UPD71071] fix initial mode and mask registers values in reset()

[FMR30] fix not to use pseudo bios class when ipl rom image is loaded
[FMR30/SCSI] support SCSI host adaptor
[FMR50] fix not to use pseudo bios class when ipl rom image is loaded
[FMR50/BIOS] remove codes for unused memory card and power management bios
[FMR50/SCSI] support SCSI host adaptor


-----


Have fun!
-- Ohta.

