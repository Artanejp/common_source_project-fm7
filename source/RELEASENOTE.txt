** Qt porting and FM-7/77/AV/AV40/EX for Common Source Code Project **

                                                          Mar 04, 2016
                            K.Ohta  (whatisthis.sowhat _at_ gmail.com)

1.About

This package is Qt5 porting of Common Source Code Project (CSP)
and Built with Visual Studio 2015 + DirectX9 + Direct Input 8 for Win32.

Additional INFO:
GNU/Linux with AMD64 binaries and Win32 with MINGW binaries are avaiable, packed with 7zip'ed format:


  or


 MD5SUM: 
 SHA256SUM: 
 Source Code:
    https://github.com/Artanejp/common_source_project-fm7/releases/tag/SNAPSHOT_20160304


2.Background
Common Source Code Project (CSP) is good emulator writing.
It also distributed with GPLv2, this is good for me.
But codes are specified to M$ Visual C.
I'm using GNU/Linux, and I starting to apply FM-7(or later).
So, I start to port to GNU/Linux and using Qt4/Qt5.

What you need at least:
a. Qt5 (neither Qt3 and Qt4) toolkit.
b. Some OpenGL implementation, maybe at leaset OpenGL v2.x .
c. gcc / g++ (4.7 or later? ) or llvm clang / clang++ (3.5 or later?) toolchain.
d. SDL2 (not SDL1.x).
e. CMake 2.8 or later.

   * TIPS: If emufoo.exe don't show screen drawing, set environment 
           variable QT_OPENGL to software (i.e. Using Windows as VirtualBox's gueat OS).


3.How to build:
After extracting (or git pulled) sourcecodes:
$ cd {srctop}/source/build-cmake/{Machine name}/
$ mkdir build
$ cd build

To configure:
$ cmake ..
or
$ ccmake ..

To build:
$ make

To install:
$ sudo make install

4.Qt specified notice:
・Place R@Ms under $HOME/emu{Machine Name}/ , this directory has made
after first using.
・Config file, {foo}.ini is writteon on $HOME/.config/emu{Machine Name}/ .

5.Status
a. I tested to build only under Debian GNU/Linux "sid".
   But, perhaps, will succed to build another GNU/Linux OSs or BSD OS variants.
   * On windows, using MinGW is already okay, but not tested drawing.
   * Cross building with GNU/Linux's MinGW32 and Qt5.5.1 (for MinGW) is available. 
     Modify and use build-cmake/config_build_cross_win32.sh and related *.cmake files.
   * And, you can also build with M$ Visual Studio 2013 or 2015.

b. Now, I using Qt5 as toolkit, because authors of Qt announced
   "Qt4 is obsolete, will be updated no longer".

c. All of virtual machines are already ported to Qt (On Oct 29, 2015):
d. Now using GCC-5.2 with Link Time Optimize to build for distrubuted binaries.

Upstream repositry:
https://github.com/Artanejp/common_source_project-fm7

Upstream (Takeda Toshiya San's original code)
http://homepage3.nifty.com/takeda-toshiya/

Changes:

* SNAPSHOT Mar 04, 2016
  * Merge upstream 2016-03-01. Applying new APIs.
  * [FM8] Fix wrong sequence of selecting BOOT ROMS when reading/writing $FD0F,
    Thanks for Anna_Wu .
  * [UI/Qt] Re-Working "Paste from clipboard", apply to new APIs.
  * [UI/Qt] Fix character encoding of config file 
            when not using UTF-8 as local encoding.
  * [General] Enable to build with LLVM Clang at least 3.7. Another
              versions are not tested yet.
  * More usable dialog for setting sound volumes.
  * Fix debugger a bit.
  * Built with commit 2fc557e88d2715f5fda328ecf38af4b81714b81e or later.
 
-- Mar 04, 2016 22:56:53 +0900 K.Ohta <whatisthis.sowhat@gmail.com>
	
Upstream changes:
-----
3/1/2016

[ALL] use integer types defined in stdint.h (uint8 -> uint8_t, etc)
[ALL] rename pair and scrntype to pair_t and scrntype_t

[COMMON] add get_long_full_path_name() and get_parent_dir()
[COMMON] rename IsFileExists() in FILEIO class to IsFileExisting()
[EMU] import Mr.Artane.'s fixes (Commits on Feb 27, 2016)
[EMU] add get_osd()
[EMU] add set_mouse_pointer(), set_mouse_button(), and get_mouse_button()
[EMU] add get_access_lamp_status() and get_led_status()
[EMU/DEBUGGER] avoid PostMessage() and GetAsyncKeyState()
[WIN32/CONSOLE] add is_console_key_pressed() and close_debugger_console()

[VM/DATAREC] fix t77 image loader (thanks Mr.Artane.)
[VM/DEVICE] add get_device_name() (thanks Mr.Artane.)
[VM/DISK] import Mr.Artane.'s fixes for eFM7/77/77AV hacks
[VM/MB8877] import Mr.Artane.'s fixes for eFM7/77/77AV hacks
[VM/MC6809] add 16/32bit read/write functions for debugger (thanks Mr.Artane.)
[VM/V99X8] fix macro to create color (thanks Mr.Artane.)
[VM/Z80DMA] fix build issue for MinGW's (older) GCC (thanks Mr.Artane.)

[FM77AV] import Mr.Artane.'s fixes (Commits on Feb 27, 2016)
[FM77AV] add eFM8 codes (thanks Mr.Artane.)
[J3100] fix build issues (thanks Mr.Artane.)


-----


Have fun!
-- Ohta.

